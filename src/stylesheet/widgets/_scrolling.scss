$_scrollbar_bg_color: transparentize(black, .9);

scrollbar {
  $_slider_min_length: 40px;
  $_slider_width: 8px;
  $_scrollbar_transition: all 200ms linear;

  background-color: $base_color;
  color: $text_color;

  // scrollbar border
  &.top    { box-shadow: inset 0 -1px $borders_color; padding-bottom: 1px; }
  &.bottom { box-shadow: inset 0  1px $borders_color; padding-top:    1px; }
  &.left   { box-shadow: inset -1px 0 $borders_color; padding-right:  1px; }
  &.right  { box-shadow: inset  1px 0 $borders_color; padding-left:   1px; }

  > range > trough {
    margin: 7px;
    transition: $_scrollbar_transition;
    border-radius: 10px;
    outline: 1px solid transparent;

    > slider {
      min-width: $_slider_width;
      min-height: $_slider_width;
      margin: -6px;
      border: 6px solid transparent;
      border-radius: 10px;
      background-clip: padding-box;
      background-color: currentColor;
      opacity: .2;
      transition: $_scrollbar_transition;

      &:hover { opacity: .4; }

      &:hover:active { opacity: .6; }

      &:disabled { opacity: .0; }
    }
  }

  &.horizontal > range > trough {
    margin-top: 6px;
    margin-bottom: 6px;
  }

  &.vertical > range > trough {
    margin-left: 6px;
    margin-right: 6px;
  }

  > range.fine-tune > trough > slider {
    &, &:hover, &:hover:active {
      background-color: $accent_color;
    }
  }

  &.overlay-indicator {
    background: none;
    color: inherit;
    box-shadow: none;
    padding: 0;

    > range > trough > slider {
      outline: 1px solid $scrollbar_outline_color;
      outline-offset: -6px;
    }

    &:not(.hovering) > range > trough > slider {
      min-width: 3px;
      min-height: 3px;
    }

    &.hovering > range > trough {
      outline-color: gtkalpha($scrollbar_outline_color, .25);
      background-color: gtkalpha(currentColor, .1);
    }

    &.horizontal {
      > range > trough > slider {
        min-width: $_slider_min_length;
      }

      &.hovering > range > trough > slider {
        min-height: 8px;
      }

      &:not(.hovering) > range > trough {
        margin-top: 3px;
        margin-bottom: 3px;
      }
    }

    &.vertical {
      > range > trough > slider {
        min-height: $_slider_min_length;
      }

      &.hovering > range > trough > slider {
        min-width: 8px;
      }

      &:not(.hovering) > range > trough {
        margin-left: 3px;
        margin-right: 3px;
      }
    }
  }

  &.horizontal > range > trough > slider { min-width: $_slider_min_length; }
  &.vertical > range > trough > slider { min-height: $_slider_min_length; }
}

scrolledwindow {
  // This is used when content is touch-dragged past boundaries.
  // draws a box on top of the content, the size changes programmatically.
  > overshoot {
    &.top {
      @include overshoot(top);
    }

    &.bottom {
      @include overshoot(bottom);
    }

    &.left {
      @include overshoot(left);
    }

    &.right {
      @include overshoot(right);
    }
  }

  > junction { // the small square between two scrollbars
    // Only color the top-left (or top right in RTL) pixel, to visually connect
    // the borders of the two scrollbars.

    background: linear-gradient(to bottom right, $borders_color 1px, $base_color 1px);

    &:dir(rtl) {
      background: linear-gradient(to bottom left, $borders_color 1px, $base_color 1px);
    }
  }
}
